# CONFIG_SITE

# Make any application-specific changes to the EPICS build
#   configuration variables in this file.
#
# Host/target specific settings can be specified in files named
#   CONFIG_SITE.$(EPICS_HOST_ARCH).Common
#   CONFIG_SITE.Common.$(T_A)
#   CONFIG_SITE.$(EPICS_HOST_ARCH).$(T_A)

# CHECK_RELEASE controls the consistency checking of the support
#   applications pointed to by the RELEASE* files.
# Normally CHECK_RELEASE should be set to YES.
# Set CHECK_RELEASE to NO to disable checking completely.
# Set CHECK_RELEASE to WARN to perform consistency checking but
#   continue building even if conflicts are found.
CHECK_RELEASE = YES

# Set this when you only want to compile this application
#   for a subset of the cross-compiled target architectures
#   that Base is built for.
#CROSS_COMPILER_TARGET_ARCHS = vxWorks-ppc32

# To install files into a location other than $(TOP) define
#   INSTALL_LOCATION here.
#INSTALL_LOCATION=</absolute/path/to/install/top>

# Set this when the IOC and build host use different paths
#   to the install location. This may be needed to boot from
#   a Microsoft FTP server say, or on some NFS configurations.
#IOCS_APPL_TOP = </IOC's/absolute/path/to/install/top>

# For application debugging purposes, override the HOST_OPT and/
#   or CROSS_OPT settings from base/configure/CONFIG_SITE
#HOST_OPT = NO
#CROSS_OPT = NO

# Path to the ChimeraTK-ControlSystemAdapter-config executable. By default, it
# is expected to be in the PATH, but one can override this by setting this
# variable to the full path to the executable in CONFIG_SITE.local.
CHIMERATK_CONTROL_SYSTEM_ADAPTER_CONFIG = ChimeraTK-ControlSystemAdapter-config

# Path to the mtca4u-deviceaccess-config executable. By default, it is expected
# to be in the PATH, but one can override this by setting this variable to the
# full path to the executable in CONFIG_SITE.local.
CHIMERATK_DEVICE_ACCESS_CONFIG = mtca4u-deviceaccess-config

# These allow developers to override the CONFIG_SITE variable
# settings without having to modify the configure/CONFIG_SITE
# file itself.
-include $(TOP)/../CONFIG_SITE.local
-include $(TOP)/configure/CONFIG_SITE.local

# We discover the linker flags by calling the config utilities for the ChimeraTK
# Control-System Adapter and DeviceAccess. We do not do this if the user has
# defined CHIMERATK_SKIP_LDFLAGS in CONFIG_SITE.local.
# As we do not have our own code that links with either library, including the
# linker flags is sufficient and we do not have to include the compiler flags.
# In fact, on some platforms, it might not even be necessary to include the
# linker flags, but at least on Linux the executable will not be able to find
# the libraries if we do not include the linker flags here.

ifndef CHIMERATK_SKIP_LDFLAGS
  USR_LDFLAGS += $(shell $(CHIMERATK_CONTROL_SYSTEM_ADAPTER_CONFIG) --ldflags)
  USR_LDFLAGS += $(shell $(CHIMERATK_DEVICE_ACCESS_CONFIG) --ldflags)
endif
